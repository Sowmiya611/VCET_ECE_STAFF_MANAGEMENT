<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Staff Dashboard</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css" rel="stylesheet">

<style>
    body {
        margin: 0;
        padding: 0;
        font-family: "Segoe UI", sans-serif;
        background: #f2f4f7;
        overflow: hidden;
    }

    .container {
        display: flex;
        height: 100vh;
        width: 100%;
        overflow: hidden;
    }

    /* LEFT SIDEBAR */
    .sidebar {
        width: 35%;
        background: linear-gradient(180deg, #143f6b, #1a5276);
        color: white;
        padding: 40px 25px;
        display: flex;
        flex-direction: column;
        align-items: center;
    }

    .college-name {
        font-size: 20px;
        font-weight: 600;
        text-align: center;
        margin-bottom: 25px;
    }

    .profile-img {
        width: 140px;
        height: 140px;
        border-radius: 50%;
        border: 4px solid rgba(255,255,255,0.4);
        object-fit: cover;
        margin-bottom: 20px;
    }

    .staff-name {
        text-align: center;
        font-size: 18px;
        font-weight: 600;
        margin: 5px 0;
    }

    .staff-designation {
        text-align: center;
        font-size: 14px;
        color: #555;
        margin-bottom: 15px;
    }
    .info-item {
        display: flex;
        align-items: center;
        margin: 5px 0;
        font-size: 15px;
        color: #fffdfdff;
        
    }

    .info-item span, .info-item::before {
        margin-right: 8px;
        color: grey; /* grey icons */
    }
    
    .count-box {
        width: 100%;
        background: rgba(255,255,255,0.15);
        padding: 20px;
        border-radius: 14px;
        text-align: center;
        margin: 20px 0;
    }

    .count-number {
        font-size: 34px;
        font-weight: 700;
    }

    .buttons {
        margin-top: 10px;
        width: 100%;
        text-align: center;
    }

    .btn {
        display: inline-block;
        width: 90%;
        padding: 10px 16px;
        margin-bottom: 12px;
        text-align: center;
        color: white;
        text-decoration: none;
        border-radius: 6px;
        font-size: 15px;
        font-weight: 600;
        transition: background-color 0.25s ease;
    }

    .button-row {
        display: flex;
        gap: 10px;
        margin-bottom: 10px;
    }

/* Smaller side-by-side buttons */
    .small-btn {
        flex: 1;                 /* makes both equal size */
        text-align: center;
    }

/* Full-width logout button */
    .full-btn {
        width: 100%;
        text-align: center;  
    }

    .add-btn {
        padding: 10px 18px;
        background: #28a745;
        color: white;
        border-radius: 8px;
        font-weight: 600;
        text-decoration: none;
    }
    .add-btn:hover {
        background: #218838;
    }


    .btn-blue { background: #0d6efd; }
    .btn-green { background: #28a745; }
    .btn-red { background: #dc3545; }

    .btn-blue:hover {
        background-color: #0069d9;
    }

    .btn-green:hover {
        background-color: #218838;
    }

    .btn-red:hover {
        background-color: #c82333;
    }

    .btn-edit i,
    .btn-delete i,
    .btn i {
        color: white;
        margin-right: 6px;  /* spacing between icon and text */
        vertical-align: middle;
    }

    /* RIGHT SIDE SCROLLABLE AREA */
    .content {
        width: 65%;
        height: 100vh;
        padding: 30px 40px;
        overflow-y: auto;
        background: white;
        box-sizing: border-box;
    }

    .activity-card {
        background: #ffffff;
        position: relative; /* allows placing buttons to the right */
        padding: 12px 20px;
        border-bottom: 1px solid #d1d5db;
        border-radius: 8px;
        border: 1px solid #ddd;
        margin-bottom: 12px;
        transition: all 0.3s ease;
    }
    .activities-header {
        border-bottom: 2px solid #d1d5db; /* full width underline */
        margin-bottom: 15px;
        padding-bottom: 8px;
    }

    .activities-header h1 {
        font-size: 26px; /* increase heading size */
         margin: 0;
    }


    .activity-card:hover {
        background-color: #f5f5f5;
        transform: translateY(-3px);
        box-shadow: 0px 4px 10px rgba(0,0,0,0.12);
        cursor: pointer;
    }
    .activities-title {
        font-size: 24px;
        margin-bottom: 10px;
        padding-bottom: 6px;
        border-bottom: 2px solid #d1d5db; /* light grey line */
    }
    

    .activity-time {
        color: #1e88e5;
        font-size: 14px;
        margin-bottom: 8px;
        font-weight: 500;
    }

    .activity-title {
        font-size: 20px;
        font-weight: bold;
        margin-bottom: 6px;
    }

    .activity-description {
        font-size: 16px;
        color: #444;
    }

    .activity-actions {
        position: absolute;
        right: 10px;
        top: 4px;
        margin-top: 10px;
        display: flex;
        gap: 8px;
    }

    .btn-edit,
    .btn-delete {
        padding: 5px 12px;
        font-size: 13px;
        border-radius: 5px;
        color: white;
        text-decoration: none;
        font-weight: 500;
        transition: background-color 0.25s ease;
    }

    /* Blue Edit Button */
    .btn-edit {
        background-color: #3b82f6; /* blue */
    }
    .btn-edit:hover {
        background-color: #2563eb;
    }

    /* Red Delete Button */
    .btn-delete {
        background-color: #ef4444; /* red */
    }
    .btn-delete:hover {
        background-color: #dc2626;
    }


</style>
</head>
<body>
{% if messages %}
    <div style="position: fixed; top: 20px; right: 20px; z-index: 9999; max-width: 400px;">
        {% for message in messages %}
            <div class="alert alert-{{ message.tags }}" style="background: {% if message.tags == 'success' %}#28a745{% elif message.tags == 'error' %}#dc3545{% elif message.tags == 'warning' %}#ffc107{% else %}#17a2b8{% endif %}; color: white; padding: 15px 20px; margin-bottom: 10px; border-radius: 8px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); animation: slideIn 0.3s ease;">
                <strong>{% if message.tags == 'success' %}âœ“{% elif message.tags == 'error' %}âœ—{% elif message.tags == 'warning' %}âš {% else %}â„¹{% endif %}</strong> {{ message }}
            </div>
        {% endfor %}
    </div>
    <style>
        @keyframes slideIn {
            from {
                transform: translateX(400px);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }
    </style>
{% endif %}



<div class="container">

    <!-- LEFT SIDEBAR -->
    <div class="sidebar">

        <div class="college-name">
            Velammal College of Engineering and Technology<br>Viraganoor, Madurai
        </div>

        <!-- Dynamic Staff Photo -->
        {% if staff_profile and staff_profile.photo %}
            <img src="{{ staff_profile.photo.url }}" class="profile-img">
        {% else %}
            <img src="https://i.ibb.co/3yqj0dC/sample.jpg" class="profile-img">
        {% endif %}

        <!-- Dynamic Staff Name -->
        <div class="staff-name">{{ request.user.first_name }} {{ request.user.last_name }}</div>

        <!-- Designation -->
        <div class="staff-designation">{{ staff_profile.designation }}</div>

        <!-- Email -->
        <div class="info-item">ðŸ“§ {{ request.user.email }}</div>

        <!-- Joining Date -->
        <div class="info-item">ðŸ“… Joined: {{ staff_profile.join_date }}</div>

        <!-- BUTTONS -->
        <div class="buttons">
            <a href="{% url 'edit_profile' request.user.id %}" class="btn btn-blue"><i class="bi bi-person-fill"></i>Edit Profile</a>
            {% if request.user.is_superuser %}
                        <a href="{% url 'create_staff_user' %}" class="btn btn-green "><i class="bi bi-person-plus-fill"></i>Create Staff User</a>
            {% endif %}
            <a href="{% url 'logout_user' %}" class="btn btn-red "><i class="bi bi-box-arrow-right"></i>Logout</a>
        </div>

    </div>


    <!-- RIGHT SIDE â€“ SCROLLABLE ACTIVITY LIST -->
    <!-- RIGHT SIDE â€“ SCROLLABLE ACTIVITY LIST -->
    <div class="content">

        <!-- Add Activity dropdown at top-right -->
        <div style="display: flex; justify-content: flex-end; margin-bottom: 15px;">
            <select class="add-btn" onchange="if(this.value) window.location.href=this.value;" style="cursor: pointer; padding: 10px 18px; border: none;">
                <option value="">Add Activity</option>
                <option value="{% url 'add_activity' 'conference' %}">International Conference</option>
                <option value="{% url 'add_activity' 'journal' %}">Journal Publications</option>
                <option value="{% url 'add_activity' 'project' %}">Funded Project Proposals</option>
                <option value="{% url 'add_activity' 'book' %}">Book / Book Chapter</option>
                <option value="{% url 'add_activity' 'mooc' %}">Event / MOOC Attended</option>
                <option value="{% url 'add_activity' 'guest' %}">Guest Performance in other institutions</option>
                <option value="{% url 'add_activity' 'reviewer' %}">Journal Reviewer</option>
                <option value="{% url 'add_activity' 'awards' %}">Awards / Achievement</option>
                <option value="{% url 'add_activity' 'patents' %}">Patents</option>
                <option value="{% url 'add_activity' 'membership' %}">Professional Membership</option>
            </select>
        </div>

        <!-- Title -->
        <div class="activities-header">
            <h1>Activities</h1>
        </div>


        {% if activities %}
            {% for activity in activities %}
            <div class="activity-card">
                <div class="activity-time">{{ activity.created_at|date:"M d, Y H:i" }}</div>
                <div class="activity-title">{{ activity.title }}</div>
                <div class="activity-description">{{ activity.description }}</div>
                <div style="font-size: 12px; color: #888; margin-top: 5px;">Type: {{ activity.type }}</div>
                <!-- Action Buttons -->
                <div class="activity-actions">
                    <a href="{% url 'edit_activity' activity.id %}" class="btn-edit"><i class="bi bi-pencil-square"></i> Edit</a>
                    <a href="{% url 'delete_activity' activity.id %}" class="btn-delete"><i class="bi bi-trash"></i>Delete</a>
                </div>
            </div>

            {% endfor %}
        {% else %}
            <p style="text-align: center; color: #888; margin-top: 50px; font-size: 18px;">No activities added yet. Click "Add Activity" to get started!</p>
        {% endif %}

    </div>


</div>

</body>
</html>
